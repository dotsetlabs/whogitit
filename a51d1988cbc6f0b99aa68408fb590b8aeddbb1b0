{
  "version": 2,
  "session": {
    "session_id": "507af6b2-6246-4ce7-963c-bb2815727a56",
    "model": {
      "id": "claude-opus-4-5-20251101",
      "provider": "anthropic"
    },
    "started_at": "2026-01-31T17:40:17.171322+00:00",
    "prompt_count": 17
  },
  "prompts": [
    {
      "index": 0,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:40:17.171356+00:00",
      "affected_files": [
        "src/capture/hook.rs"
      ]
    },
    {
      "index": 1,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:43:08.083662+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 2,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:43:18.313593+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 3,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:43:44.569559+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 4,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:43:49.387229+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 5,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:44:05.055152+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 6,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:44:19.310066+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 7,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:44:59.032716+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 8,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:45:51.610129+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 9,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:46:40.101383+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 10,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:48:21.410581+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 11,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:48:41.990788+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 12,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:49:05.357983+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 13,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:49:10.204941+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 14,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:49:14.783652+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 15,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:49:19.384654+00:00",
      "affected_files": [
        "src/capture/threeway.rs"
      ]
    },
    {
      "index": 16,
      "text": "AI-assisted code change",
      "timestamp": "2026-01-31T17:49:53.582681+00:00",
      "affected_files": [
        "tests/integration_test.rs"
      ]
    }
  ],
  "files": [
    {
      "path": "tests/integration_test.rs",
      "lines": [
        {
          "line_number": 1,
          "content": "use std::fs;",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 2,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 3,
          "content": "use git2::{Repository, Signature};",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 4,
          "content": "use tempfile::TempDir;",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 5,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 6,
          "content": "use ai_blame::capture::pending::PendingBuffer;",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 7,
          "content": "use ai_blame::capture::threeway::ThreeWayAnalyzer;",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 8,
          "content": "use ai_blame::core::attribution::{AIAttribution, PromptInfo, SessionMetadata};",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 9,
          "content": "use ai_blame::storage::notes::NotesStore;",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 10,
          "content": "use ai_blame::storage::trailers::TrailerGenerator;",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 11,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 12,
          "content": "/// Test the full workflow: capture changes, commit, and analyze with three-way diff",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 13,
          "content": "#[test]",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 14,
          "content": "fn test_full_workflow() {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 15,
          "content": "    // Create a test repo",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 16,
          "content": "    let dir = TempDir::new().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 17,
          "content": "    let repo = Repository::init(dir.path()).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 18,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 19,
          "content": "    // Configure git user",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 20,
          "content": "    let mut config = repo.config().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 21,
          "content": "    config.set_str(\"user.name\", \"Test User\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 22,
          "content": "    config.set_str(\"user.email\", \"test@example.com\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 23,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 24,
          "content": "    // Create initial file",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 25,
          "content": "    let file_path = dir.path().join(\"test.rs\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 26,
          "content": "    fs::write(&file_path, \"fn main() {}\\n\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 27,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 28,
          "content": "    // Initial commit",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 29,
          "content": "    {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 30,
          "content": "        let mut index = repo.index().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 31,
          "content": "        index.add_path(std::path::Path::new(\"test.rs\")).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 32,
          "content": "        index.write().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 33,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 34,
          "content": "        let tree_id = index.write_tree().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 35,
          "content": "        let tree = repo.find_tree(tree_id).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 36,
          "content": "        let sig = Signature::now(\"Test User\", \"test@example.com\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 37,
          "content": "        repo.commit(Some(\"HEAD\"), &sig, &sig, \"Initial commit\", &tree, &[])",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 38,
          "content": "            .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 39,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 40,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 41,
          "content": "    // Simulate AI-assisted edit using v2 API",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 42,
          "content": "    let ai_content = r#\"fn main() {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 43,
          "content": "    println!(\"Hello, AI!\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 44,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 45,
          "content": "\"#;",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 46,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 47,
          "content": "    // Create pending buffer with v2 API",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 48,
          "content": "    let mut buffer = PendingBuffer::new(\"test-session-123\", \"claude-opus-4-5-20251101\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 49,
          "content": "    buffer.record_edit(",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 50,
          "content": "        \"test.rs\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 51,
          "content": "        Some(\"fn main() {}\\n\"),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 52,
          "content": "        ai_content,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 53,
          "content": "        \"Edit\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 54,
          "content": "        \"Add greeting to main function\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 55,
          "content": "        None,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 56,
          "content": "    );",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 57,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 58,
          "content": "    // Verify pending changes captured",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 59,
          "content": "    assert!(buffer.has_changes());",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 60,
          "content": "    assert_eq!(buffer.file_count(), 1);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 61,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 62,
          "content": "    let history = buffer.get_file_history(\"test.rs\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 63,
          "content": "    assert_eq!(history.edits.len(), 1);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 64,
          "content": "    assert_eq!(history.original.content, \"fn main() {}\\n\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 65,
          "content": "    assert!(history.edits[0].after.content.contains(\"println\"));",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 66,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 67,
          "content": "    // Simulate user manually adding a line before committing",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 68,
          "content": "    let final_content = r#\"// Author: Test User",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 69,
          "content": "fn main() {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 70,
          "content": "    println!(\"Hello, AI!\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 71,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 72,
          "content": "\"#;",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 73,
          "content": "    fs::write(&file_path, final_content).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 74,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 75,
          "content": "    // Perform three-way analysis",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 76,
          "content": "    let result = ThreeWayAnalyzer::analyze_with_diff(history, final_content);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 77,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 78,
          "content": "    // Verify attribution",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 79,
          "content": "    assert_eq!(result.path, \"test.rs\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 80,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 81,
          "content": "    // Should detect the comment as human-added",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 82,
          "content": "    assert!(",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 83,
          "content": "        result.summary.human_lines >= 1,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 84,
          "content": "        \"Should have at least 1 human line\"",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 85,
          "content": "    );",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 86,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 87,
          "content": "    // Should detect some AI lines",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 88,
          "content": "    assert!(",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 89,
          "content": "        result.summary.ai_lines >= 1,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 90,
          "content": "        \"Should have at least 1 AI line\"",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 91,
          "content": "    );",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 92,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 93,
          "content": "    // Verify we can identify the human-added comment line",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 94,
          "content": "    let first_line = &result.lines[0];",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 95,
          "content": "    assert!(first_line.content.contains(\"Author\"));",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 96,
          "content": "    assert!(",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 97,
          "content": "        first_line.source.is_human(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 98,
          "content": "        \"First line should be human-added\"",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 99,
          "content": "    );",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 100,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 101,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 102,
          "content": "/// Test that privacy redaction works",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 103,
          "content": "#[test]",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 104,
          "content": "fn test_privacy_redaction() {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 105,
          "content": "    let redactor = ai_blame::privacy::Redactor::default_patterns();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 106,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 107,
          "content": "    let sensitive = \"Use api_key = sk-secret123 for auth with user@email.com\";",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 108,
          "content": "    let redacted = redactor.redact(sensitive);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 109,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 110,
          "content": "    assert!(!redacted.contains(\"sk-secret123\"));",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 111,
          "content": "    assert!(!redacted.contains(\"user@email.com\"));",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 112,
          "content": "    assert!(redacted.contains(\"[REDACTED]\"));",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 113,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 114,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 115,
          "content": "/// Test trailers generation",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 116,
          "content": "#[test]",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 117,
          "content": "fn test_trailers() {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 118,
          "content": "    use ai_blame::capture::snapshot::{AttributionSummary, FileAttributionResult};",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 119,
          "content": "    use ai_blame::core::attribution::ModelInfo;",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 120,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 121,
          "content": "    let attribution = AIAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 122,
          "content": "        version: 2,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 123,
          "content": "        session: SessionMetadata {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 124,
          "content": "            session_id: \"abc123\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 125,
          "content": "            model: ModelInfo::claude(\"claude-opus-4-5-20251101\"),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 126,
          "content": "            started_at: \"2026-01-30T10:00:00Z\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 127,
          "content": "            prompt_count: 5,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 128,
          "content": "        },",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 129,
          "content": "        prompts: vec![],",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 130,
          "content": "        files: vec![FileAttributionResult {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 131,
          "content": "            path: \"test.rs\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 132,
          "content": "            lines: vec![],",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 133,
          "content": "            summary: AttributionSummary {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 134,
          "content": "                total_lines: 10,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 135,
          "content": "                ai_lines: 5,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 136,
          "content": "                ai_modified_lines: 2,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 137,
          "content": "                human_lines: 3,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 138,
          "content": "                original_lines: 0,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 139,
          "content": "                unknown_lines: 0,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 140,
          "content": "            },",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 141,
          "content": "        }],",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 142,
          "content": "    };",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 143,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 144,
          "content": "    let trailers = TrailerGenerator::generate(&attribution);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 145,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 146,
          "content": "    assert!(trailers.iter().any(|(k, _)| k == \"AI-Session\"));",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 147,
          "content": "    assert!(trailers.iter().any(|(k, _)| k == \"AI-Model\"));",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 148,
          "content": "    assert!(trailers",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 149,
          "content": "        .iter()",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 150,
          "content": "        .any(|(k, v)| k == \"Co-Authored-By\" && v.contains(\"Claude\")));",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 151,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 152,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 153,
          "content": "/// Test multiple AI edits on the same file",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 154,
          "content": "#[test]",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 155,
          "content": "fn test_multiple_ai_edits() {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 156,
          "content": "    let mut buffer = PendingBuffer::new(\"test-session\", \"claude-opus-4-5-20251101\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 157,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 158,
          "content": "    // First AI edit",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 159,
          "content": "    buffer.record_edit(",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 160,
          "content": "        \"test.rs\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 161,
          "content": "        Some(\"original\\n\"),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 162,
          "content": "        \"original\\nfirst_ai_line\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 163,
          "content": "        \"Edit\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 164,
          "content": "        \"First prompt: add a line\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 165,
          "content": "        None,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 166,
          "content": "    );",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 167,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 168,
          "content": "    // Second AI edit",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 169,
          "content": "    buffer.record_edit(",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 170,
          "content": "        \"test.rs\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 171,
          "content": "        None, // Not needed - will use last AI state",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 172,
          "content": "        \"original\\nfirst_ai_line\\nsecond_ai_line\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 173,
          "content": "        \"Edit\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 174,
          "content": "        \"Second prompt: add another line\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 175,
          "content": "        None,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 176,
          "content": "    );",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 177,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 178,
          "content": "    // Verify edit history",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 179,
          "content": "    let history = buffer.get_file_history(\"test.rs\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 180,
          "content": "    assert_eq!(history.edits.len(), 2);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 181,
          "content": "    assert_eq!(history.edits[0].prompt_index, 0);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 182,
          "content": "    assert_eq!(history.edits[1].prompt_index, 1);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 183,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 184,
          "content": "    // The second edit should reference the first edit's output as its input",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 185,
          "content": "    assert_eq!(history.edits[1].before.content, \"original\\nfirst_ai_line\\n\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 186,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 187,
          "content": "    // Analyze final content matching AI exactly",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 188,
          "content": "    let result = ThreeWayAnalyzer::analyze(history, \"original\\nfirst_ai_line\\nsecond_ai_line\\n\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 189,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 190,
          "content": "    // \"original\" exists in BOTH the original file AND AI output  Original (unchanged)",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 191,
          "content": "    // \"first_ai_line\" and \"second_ai_line\" only exist in AI output  AI",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 192,
          "content": "    assert_eq!(result.summary.ai_lines, 2);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 193,
          "content": "    assert_eq!(result.summary.original_lines, 1);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 194,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 195,
          "content": "    // Lines are attributed to the last edit that included them",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 196,
          "content": "    // Since all 3 lines appear in edit 1's output, they all have prompt_index 1",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 197,
          "content": "    let second_ai = result",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 198,
          "content": "        .lines",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 199,
          "content": "        .iter()",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 200,
          "content": "        .find(|l| l.content == \"second_ai_line\")",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 201,
          "content": "        .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 202,
          "content": "    assert_eq!(second_ai.prompt_index, Some(1));",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 203,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 204,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 205,
          "content": "/// Test detecting human modifications to AI code",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 206,
          "content": "#[test]",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 207,
          "content": "fn test_human_modifies_ai_code() {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 208,
          "content": "    let mut buffer = PendingBuffer::new(\"test-session\", \"claude-opus-4-5-20251101\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 209,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 210,
          "content": "    buffer.record_edit(",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 211,
          "content": "        \"test.rs\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 212,
          "content": "        Some(\"\"),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 213,
          "content": "        \"fn hello() {\\n    println!(\\\"hello\\\");\\n}\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 214,
          "content": "        \"Write\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 215,
          "content": "        \"Create hello function\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 216,
          "content": "        None,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 217,
          "content": "    );",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 218,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 219,
          "content": "    let history = buffer.get_file_history(\"test.rs\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 220,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 221,
          "content": "    // Human modifies the println line",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 222,
          "content": "    let final_content = \"fn hello() {\\n    println!(\\\"hello, world!\\\");\\n}\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 223,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 224,
          "content": "    let result = ThreeWayAnalyzer::analyze_with_diff(history, final_content);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 225,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 226,
          "content": "    // The \"fn hello() {\" line should still be AI",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 227,
          "content": "    let fn_line = result",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 228,
          "content": "        .lines",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 229,
          "content": "        .iter()",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 230,
          "content": "        .find(|l| l.content.contains(\"fn hello\"))",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 231,
          "content": "        .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 232,
          "content": "    assert!(fn_line.source.is_ai(), \"fn line should be AI\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 233,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 234,
          "content": "    // The modified println line should be detected as AIModified or Human",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 235,
          "content": "    let _println_line = result",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 236,
          "content": "        .lines",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 237,
          "content": "        .iter()",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 238,
          "content": "        .find(|l| l.content.contains(\"println\"))",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 239,
          "content": "        .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 240,
          "content": "    // It might be detected as AIModified if similar enough, or Human if different enough",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 241,
          "content": "    // Either is acceptable - the key is we don't mark it as pure AI",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 242,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 243,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 244,
          "content": "/// Test line attribution for new file creation",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 245,
          "content": "#[test]",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 246,
          "content": "fn test_new_file_attribution() {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 247,
          "content": "    let mut buffer = PendingBuffer::new(\"test-session\", \"claude-opus-4-5-20251101\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 248,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 249,
          "content": "    buffer.record_edit(",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 250,
          "content": "        \"new_file.rs\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 251,
          "content": "        None, // New file",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 252,
          "content": "        \"// New file\\nfn new_func() {}\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 253,
          "content": "        \"Write\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 254,
          "content": "        \"Create new file\",",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 255,
          "content": "        None,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 256,
          "content": "    );",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 257,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 258,
          "content": "    let history = buffer.get_file_history(\"new_file.rs\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 259,
          "content": "    assert!(history.was_new_file);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 260,
          "content": "    assert!(history.original.content.is_empty());",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 261,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 262,
          "content": "    // All content was AI-generated",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 263,
          "content": "    let result = ThreeWayAnalyzer::analyze(history, \"// New file\\nfn new_func() {}\\n\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 264,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 265,
          "content": "    assert_eq!(result.summary.ai_lines, 2);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 266,
          "content": "    assert_eq!(result.summary.human_lines, 0);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 267,
          "content": "    assert_eq!(result.summary.original_lines, 0);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 268,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 269,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 270,
          "content": "/// Test storing and fetching attribution from git notes",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 271,
          "content": "#[test]",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 272,
          "content": "fn test_notes_roundtrip() {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 273,
          "content": "    use ai_blame::capture::snapshot::{",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 274,
          "content": "        AttributionSummary, FileAttributionResult, LineAttribution, LineSource,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 275,
          "content": "    };",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 276,
          "content": "    use ai_blame::core::attribution::ModelInfo;",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 277,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 278,
          "content": "    let dir = TempDir::new().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 279,
          "content": "    let repo = Repository::init(dir.path()).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 280,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 281,
          "content": "    // Create initial commit",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 282,
          "content": "    {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 283,
          "content": "        let sig = Signature::now(\"Test\", \"test@test.com\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 284,
          "content": "        let tree_id = repo.index().unwrap().write_tree().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 285,
          "content": "        let tree = repo.find_tree(tree_id).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 286,
          "content": "        repo.commit(Some(\"HEAD\"), &sig, &sig, \"Initial\", &tree, &[])",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 287,
          "content": "            .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 288,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 289,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 290,
          "content": "    let head = repo.head().unwrap().peel_to_commit().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 291,
          "content": "    let store = NotesStore::new(&repo).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 292,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 293,
          "content": "    let attribution = AIAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 294,
          "content": "        version: 2,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 295,
          "content": "        session: SessionMetadata {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 296,
          "content": "            session_id: \"test-session\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 297,
          "content": "            model: ModelInfo::claude(\"claude-opus-4-5-20251101\"),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 298,
          "content": "            started_at: \"2026-01-30T10:00:00Z\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 299,
          "content": "            prompt_count: 1,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 300,
          "content": "        },",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 301,
          "content": "        prompts: vec![PromptInfo {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 302,
          "content": "            index: 0,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 303,
          "content": "            text: \"Create test function\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 304,
          "content": "            timestamp: \"2026-01-30T10:00:00Z\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 305,
          "content": "            affected_files: vec![\"test.rs\".to_string()],",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 306,
          "content": "        }],",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 307,
          "content": "        files: vec![FileAttributionResult {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 308,
          "content": "            path: \"test.rs\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 309,
          "content": "            lines: vec![LineAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 310,
          "content": "                line_number: 1,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 311,
          "content": "                content: \"fn test() {}\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 312,
          "content": "                source: LineSource::AI {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 313,
          "content": "                    edit_id: \"e1\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 314,
          "content": "                },",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 315,
          "content": "                edit_id: Some(\"e1\".to_string()),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 316,
          "content": "                prompt_index: Some(0),",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 317,
          "content": "                confidence: 1.0,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 318,
          "content": "            }],",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 319,
          "content": "            summary: AttributionSummary {",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 320,
          "content": "                total_lines: 1,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 321,
          "content": "                ai_lines: 1,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 322,
          "content": "                ai_modified_lines: 0,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 323,
          "content": "                human_lines: 0,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 324,
          "content": "                original_lines: 0,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 325,
          "content": "                unknown_lines: 0,",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 326,
          "content": "            },",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 327,
          "content": "        }],",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 328,
          "content": "    };",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 329,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 330,
          "content": "    // Store",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 331,
          "content": "    store.store_attribution(head.id(), &attribution).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 332,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 333,
          "content": "    // Fetch and verify",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 334,
          "content": "    let fetched = store.fetch_attribution(head.id()).unwrap().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 335,
          "content": "    assert_eq!(fetched.version, 2);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 336,
          "content": "    assert_eq!(fetched.session.session_id, \"test-session\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 337,
          "content": "    assert_eq!(fetched.files.len(), 1);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 338,
          "content": "    assert_eq!(fetched.prompts.len(), 1);",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 339,
          "content": "    assert_eq!(fetched.prompts[0].text, \"Create test function\");",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        },
        {
          "line_number": 340,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22"
          },
          "edit_id": "f01616f0-5a18-4c2f-a576-e0396b9bee22",
          "prompt_index": 16,
          "confidence": 1.0
        }
      ],
      "summary": {
        "total_lines": 340,
        "ai_lines": 340,
        "ai_modified_lines": 0,
        "human_lines": 0,
        "original_lines": 0,
        "unknown_lines": 0
      }
    },
    {
      "path": "src/capture/hook.rs",
      "lines": [
        {
          "line_number": 1,
          "content": "use std::env;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 2,
          "content": "use std::path::Path;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 3,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 4,
          "content": "use anyhow::{Context, Result};",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 5,
          "content": "use git2::Repository;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 6,
          "content": "use serde::{Deserialize, Serialize};",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 7,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 8,
          "content": "use crate::capture::pending::{PendingBuffer, PendingStore};",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 9,
          "content": "use crate::capture::threeway::ThreeWayAnalyzer;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 10,
          "content": "use crate::core::attribution::{AIAttribution, PromptInfo, SessionMetadata};",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 11,
          "content": "use crate::privacy::redaction::Redactor;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 12,
          "content": "use crate::storage::notes::NotesStore;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 13,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 14,
          "content": "/// Environment variable for session ID",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 15,
          "content": "const ENV_SESSION_ID: &str = \"AI_BLAME_SESSION_ID\";",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 16,
          "content": "/// Environment variable for model ID",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 17,
          "content": "const ENV_MODEL_ID: &str = \"AI_BLAME_MODEL_ID\";",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 18,
          "content": "/// Default model if not specified",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 19,
          "content": "const DEFAULT_MODEL: &str = \"claude-opus-4-5-20251101\";",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 20,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 21,
          "content": "/// Input from Claude Code hook for file changes",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 22,
          "content": "#[derive(Debug, Clone, Serialize, Deserialize)]",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 23,
          "content": "pub struct HookInput {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 24,
          "content": "    /// The tool being called (Edit, Write)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 25,
          "content": "    pub tool: String,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 26,
          "content": "    /// File path being modified",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 27,
          "content": "    pub file_path: String,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 28,
          "content": "    /// The current user prompt/context",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 29,
          "content": "    pub prompt: String,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 30,
          "content": "    /// Old file content (None for new files)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 31,
          "content": "    pub old_content: Option<String>,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 32,
          "content": "    /// New file content",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 33,
          "content": "    pub new_content: String,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 34,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 35,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 36,
          "content": "/// Claude Code hook handler",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 37,
          "content": "pub struct CaptureHook {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 38,
          "content": "    /// Repository root path",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 39,
          "content": "    repo_root: std::path::PathBuf,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 40,
          "content": "    /// Privacy redactor",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 41,
          "content": "    redactor: Redactor,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 42,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 43,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 44,
          "content": "impl CaptureHook {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 45,
          "content": "    /// Create a new capture hook for a repository",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 46,
          "content": "    pub fn new(repo_path: &Path) -> Result<Self> {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 47,
          "content": "        let repo_root = repo_path.to_path_buf();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 48,
          "content": "        let redactor = Redactor::default_patterns();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 49,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 50,
          "content": "        Ok(Self {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 51,
          "content": "            repo_root,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 52,
          "content": "            redactor,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 53,
          "content": "        })",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 54,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 55,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 56,
          "content": "    /// Get or create session ID",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 57,
          "content": "    fn get_session_id() -> String {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 58,
          "content": "        env::var(ENV_SESSION_ID).unwrap_or_else(|_| uuid::Uuid::new_v4().to_string())",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 59,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 60,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 61,
          "content": "    /// Get model ID from environment",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 62,
          "content": "    fn get_model_id() -> String {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 63,
          "content": "        env::var(ENV_MODEL_ID).unwrap_or_else(|_| DEFAULT_MODEL.to_string())",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 64,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 65,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 66,
          "content": "    /// Handle a file change from Claude Code",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 67,
          "content": "    pub fn on_file_change(&self, input: HookInput) -> Result<()> {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 68,
          "content": "        let store = PendingStore::new(&self.repo_root);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 69,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 70,
          "content": "        // Load or create pending buffer",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 71,
          "content": "        let mut buffer = match store.load()? {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 72,
          "content": "            Some(b) => {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 73,
          "content": "                // Check if we should start a new session",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 74,
          "content": "                // (different session ID in env means new session)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 75,
          "content": "                let current_session = Self::get_session_id();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 76,
          "content": "                if b.session.session_id != current_session && env::var(ENV_SESSION_ID).is_ok() {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 77,
          "content": "                    // New session ID explicitly set, start fresh",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 78,
          "content": "                    // But first, warn about uncommitted changes",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 79,
          "content": "                    if b.has_changes() {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 80,
          "content": "                        eprintln!(",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 81,
          "content": "                            \"ai-blame: Warning - discarding {} uncommitted edits from previous session\",",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 82,
          "content": "                            b.total_edits()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 83,
          "content": "                        );",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 84,
          "content": "                    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 85,
          "content": "                    PendingBuffer::new(&current_session, &Self::get_model_id())",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 86,
          "content": "                } else {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 87,
          "content": "                    b",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 88,
          "content": "                }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 89,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 90,
          "content": "            None => PendingBuffer::new(&Self::get_session_id(), &Self::get_model_id()),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 91,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 92,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 93,
          "content": "        // Make path relative to repo root",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 94,
          "content": "        let relative_path = self.make_relative_path(&input.file_path)?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 95,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 96,
          "content": "        // Validate input",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 97,
          "content": "        if relative_path.is_empty() {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 98,
          "content": "            anyhow::bail!(\"Empty file path\");",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 99,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 100,
          "content": "        if input.new_content.is_empty() && input.tool != \"Delete\" {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 101,
          "content": "            eprintln!(\"ai-blame: Warning - empty new_content for non-delete operation\");",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 102,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 103,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 104,
          "content": "        // Determine old content: use provided value, or fall back to git HEAD",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 105,
          "content": "        let old_content = match input.old_content {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 106,
          "content": "            Some(content) => Some(content),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 107,
          "content": "            None => {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 108,
          "content": "                // Try to get content from git HEAD for existing files",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 109,
          "content": "                self.get_content_from_git_head(&relative_path)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 110,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 111,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 112,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 113,
          "content": "        // Record the edit with full content snapshots",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 114,
          "content": "        buffer.record_edit(",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 115,
          "content": "            &relative_path,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 116,
          "content": "            old_content.as_deref(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 117,
          "content": "            &input.new_content,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 118,
          "content": "            &input.tool,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 119,
          "content": "            &input.prompt,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 120,
          "content": "            Some(&self.redactor),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 121,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 122,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 123,
          "content": "        // Save buffer with atomic write",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 124,
          "content": "        store.save(&buffer)?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 125,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 126,
          "content": "        Ok(())",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 127,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 128,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 129,
          "content": "    /// Get file content from git HEAD (the last committed version)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 130,
          "content": "    fn get_content_from_git_head(&self, path: &str) -> Option<String> {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 131,
          "content": "        let repo = Repository::open(&self.repo_root).ok()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 132,
          "content": "        let head = repo.head().ok()?.peel_to_commit().ok()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 133,
          "content": "        let tree = head.tree().ok()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 134,
          "content": "        let entry = tree.get_path(std::path::Path::new(path)).ok()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 135,
          "content": "        let blob = repo.find_blob(entry.id()).ok()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 136,
          "content": "        let content = std::str::from_utf8(blob.content()).ok()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 137,
          "content": "        Some(content.to_string())",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 138,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 139,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 140,
          "content": "    /// Handle post-commit: perform three-way analysis, attach notes, and clean up",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 141,
          "content": "    pub fn on_post_commit(&self) -> Result<Option<AIAttribution>> {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 142,
          "content": "        let store = PendingStore::new(&self.repo_root);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 143,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 144,
          "content": "        // Load pending buffer",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 145,
          "content": "        let buffer = match store.load()? {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 146,
          "content": "            Some(b) if b.has_changes() => b,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 147,
          "content": "            _ => return Ok(None),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 148,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 149,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 150,
          "content": "        // Open repo and get HEAD commit",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 151,
          "content": "        let repo = Repository::open(&self.repo_root).context(\"Failed to open repository\")?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 152,
          "content": "        let head = repo",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 153,
          "content": "            .head()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 154,
          "content": "            .context(\"Failed to get HEAD\")?",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 155,
          "content": "            .peel_to_commit()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 156,
          "content": "            .context(\"Failed to get HEAD commit\")?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 157,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 158,
          "content": "        // Analyze each file with three-way diff against committed content",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 159,
          "content": "        let mut file_results = Vec::new();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 160,
          "content": "        let tree = head.tree()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 161,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 162,
          "content": "        for (path, history) in &buffer.file_histories {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 163,
          "content": "            // Get the committed content for this file",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 164,
          "content": "            let committed_content = match tree.get_path(std::path::Path::new(path)) {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 165,
          "content": "                Ok(entry) => {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 166,
          "content": "                    let blob = repo.find_blob(entry.id())?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 167,
          "content": "                    String::from_utf8_lossy(blob.content()).to_string()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 168,
          "content": "                }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 169,
          "content": "                Err(_) => {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 170,
          "content": "                    // File might have been deleted or not staged",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 171,
          "content": "                    continue;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 172,
          "content": "                }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 173,
          "content": "            };",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 174,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 175,
          "content": "            // Perform three-way analysis",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 176,
          "content": "            let result = ThreeWayAnalyzer::analyze_with_diff(history, &committed_content);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 177,
          "content": "            file_results.push(result);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 178,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 179,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 180,
          "content": "        // Create attribution with full analysis",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 181,
          "content": "        let attribution = AIAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 182,
          "content": "            version: 2,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 183,
          "content": "            session: SessionMetadata {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 184,
          "content": "                session_id: buffer.session.session_id.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 185,
          "content": "                model: buffer.session.model.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 186,
          "content": "                started_at: buffer.session.started_at.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 187,
          "content": "                prompt_count: buffer.session.prompt_count,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 188,
          "content": "            },",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 189,
          "content": "            prompts: buffer",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 190,
          "content": "                .session",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 191,
          "content": "                .prompts",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 192,
          "content": "                .iter()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 193,
          "content": "                .map(|p| PromptInfo {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 194,
          "content": "                    index: p.index,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 195,
          "content": "                    text: p.text.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 196,
          "content": "                    timestamp: p.timestamp.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 197,
          "content": "                    affected_files: p.affected_files.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 198,
          "content": "                })",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 199,
          "content": "                .collect(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 200,
          "content": "            files: file_results,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 201,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 202,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 203,
          "content": "        // Store as git note",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 204,
          "content": "        let notes_store = NotesStore::new(&repo)?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 205,
          "content": "        notes_store.store_attribution(head.id(), &attribution)?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 206,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 207,
          "content": "        // Clean up pending file",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 208,
          "content": "        store.delete()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 209,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 210,
          "content": "        // Log summary",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 211,
          "content": "        let total_ai = attribution",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 212,
          "content": "            .files",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 213,
          "content": "            .iter()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 214,
          "content": "            .map(|f| f.summary.ai_lines + f.summary.ai_modified_lines)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 215,
          "content": "            .sum::<usize>();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 216,
          "content": "        let total_human = attribution",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 217,
          "content": "            .files",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 218,
          "content": "            .iter()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 219,
          "content": "            .map(|f| f.summary.human_lines)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 220,
          "content": "            .sum::<usize>();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 221,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 222,
          "content": "        eprintln!(",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 223,
          "content": "            \"ai-blame: Attached attribution - {} AI lines, {} human lines across {} files\",",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 224,
          "content": "            total_ai,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 225,
          "content": "            total_human,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 226,
          "content": "            attribution.files.len()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 227,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 228,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 229,
          "content": "        Ok(Some(attribution))",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 230,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 231,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 232,
          "content": "    /// Make a path relative to the repo root",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 233,
          "content": "    fn make_relative_path(&self, path: &str) -> Result<String> {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 234,
          "content": "        let abs_path = if Path::new(path).is_absolute() {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 235,
          "content": "            Path::new(path).to_path_buf()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 236,
          "content": "        } else {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 237,
          "content": "            self.repo_root.join(path)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 238,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 239,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 240,
          "content": "        let relative = abs_path",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 241,
          "content": "            .strip_prefix(&self.repo_root)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 242,
          "content": "            .map(|p| p.to_string_lossy().to_string())",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 243,
          "content": "            .unwrap_or_else(|_| path.to_string());",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 244,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 245,
          "content": "        Ok(relative)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 246,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 247,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 248,
          "content": "    /// Get current pending status",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 249,
          "content": "    pub fn status(&self) -> Result<PendingStatus> {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 250,
          "content": "        let store = PendingStore::new(&self.repo_root);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 251,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 252,
          "content": "        // Use quiet load to avoid spurious warnings during status check",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 253,
          "content": "        match store.load_quiet()? {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 254,
          "content": "            Some(buffer) => {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 255,
          "content": "                let session_id = buffer.session.session_id.clone();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 256,
          "content": "                let file_count = buffer.file_count();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 257,
          "content": "                let line_count = buffer.total_lines();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 258,
          "content": "                let edit_count = buffer.total_edits();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 259,
          "content": "                let prompt_count = buffer.session.prompt_count;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 260,
          "content": "                let has_pending = buffer.has_changes();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 261,
          "content": "                let is_stale = buffer.is_stale();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 262,
          "content": "                let age = buffer.age_string();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 263,
          "content": "                Ok(PendingStatus {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 264,
          "content": "                    has_pending,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 265,
          "content": "                    session_id: Some(session_id),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 266,
          "content": "                    file_count,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 267,
          "content": "                    line_count,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 268,
          "content": "                    edit_count,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 269,
          "content": "                    prompt_count,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 270,
          "content": "                    is_stale,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 271,
          "content": "                    age,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 272,
          "content": "                })",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 273,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 274,
          "content": "            None => Ok(PendingStatus {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 275,
          "content": "                has_pending: false,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 276,
          "content": "                session_id: None,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 277,
          "content": "                file_count: 0,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 278,
          "content": "                line_count: 0,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 279,
          "content": "                edit_count: 0,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 280,
          "content": "                prompt_count: 0,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 281,
          "content": "                is_stale: false,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 282,
          "content": "                age: String::new(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 283,
          "content": "            }),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 284,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 285,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 286,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 287,
          "content": "    /// Clear pending changes without committing",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 288,
          "content": "    pub fn clear_pending(&self) -> Result<()> {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 289,
          "content": "        let store = PendingStore::new(&self.repo_root);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 290,
          "content": "        store.delete()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 291,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 292,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 293,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 294,
          "content": "/// Status of pending changes",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 295,
          "content": "#[derive(Debug)]",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 296,
          "content": "pub struct PendingStatus {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 297,
          "content": "    pub has_pending: bool,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 298,
          "content": "    pub session_id: Option<String>,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 299,
          "content": "    pub file_count: usize,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 300,
          "content": "    pub line_count: u32,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 301,
          "content": "    pub edit_count: usize,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 302,
          "content": "    pub prompt_count: u32,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 303,
          "content": "    /// Whether the pending buffer is stale (older than 24 hours)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 304,
          "content": "    pub is_stale: bool,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 305,
          "content": "    /// Human-readable age of the pending buffer",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 306,
          "content": "    pub age: String,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 307,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 308,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 309,
          "content": "/// Hook entry point for Claude Code integration",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 310,
          "content": "pub fn run_capture_hook() -> Result<()> {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 311,
          "content": "    // Read input from stdin",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 312,
          "content": "    let input: HookInput = serde_json::from_reader(std::io::stdin())",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 313,
          "content": "        .context(\"Failed to read hook input from stdin\")?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 314,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 315,
          "content": "    // Find repo root",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 316,
          "content": "    let repo_root = find_repo_root()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 317,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 318,
          "content": "    // Process the change",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 319,
          "content": "    let hook = CaptureHook::new(&repo_root)?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 320,
          "content": "    hook.on_file_change(input)?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 321,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 322,
          "content": "    Ok(())",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 323,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 324,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 325,
          "content": "/// Find the git repository root from current directory",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 326,
          "content": "fn find_repo_root() -> Result<std::path::PathBuf> {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 327,
          "content": "    let current = env::current_dir()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 328,
          "content": "    let repo = Repository::discover(&current).context(\"Not in a git repository\")?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 329,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 330,
          "content": "    repo.workdir()",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 331,
          "content": "        .map(|p| p.to_path_buf())",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 332,
          "content": "        .context(\"Repository has no working directory\")",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 333,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 334,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 335,
          "content": "/// Git post-commit hook entry point",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 336,
          "content": "pub fn run_post_commit_hook() -> Result<()> {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 337,
          "content": "    let repo_root = find_repo_root()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 338,
          "content": "    let hook = CaptureHook::new(&repo_root)?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 339,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 340,
          "content": "    hook.on_post_commit()?;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 341,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 342,
          "content": "    Ok(())",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 343,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 344,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 345,
          "content": "#[cfg(test)]",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 346,
          "content": "mod tests {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 347,
          "content": "    use super::*;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 348,
          "content": "    use git2::Signature;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 349,
          "content": "    use tempfile::TempDir;",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 350,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 351,
          "content": "    fn create_test_repo() -> (TempDir, Repository) {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 352,
          "content": "        let dir = TempDir::new().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 353,
          "content": "        let repo = Repository::init(dir.path()).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 354,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 355,
          "content": "        // Create initial commit",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 356,
          "content": "        {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 357,
          "content": "            let sig = Signature::now(\"Test\", \"test@test.com\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 358,
          "content": "            let tree_id = repo.index().unwrap().write_tree().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 359,
          "content": "            let tree = repo.find_tree(tree_id).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 360,
          "content": "            repo.commit(Some(\"HEAD\"), &sig, &sig, \"Initial\", &tree, &[])",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 361,
          "content": "                .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 362,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 363,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 364,
          "content": "        (dir, repo)",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 365,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 366,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 367,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 368,
          "content": "    fn test_capture_hook_on_file_change() {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 369,
          "content": "        let (dir, _repo) = create_test_repo();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 370,
          "content": "        let hook = CaptureHook::new(dir.path()).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 371,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 372,
          "content": "        let input = HookInput {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 373,
          "content": "            tool: \"Write\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 374,
          "content": "            file_path: \"test.rs\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 375,
          "content": "            prompt: \"Create a test file\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 376,
          "content": "            old_content: None,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 377,
          "content": "            new_content: \"fn test() {}\\n\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 378,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 379,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 380,
          "content": "        hook.on_file_change(input).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 381,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 382,
          "content": "        let status = hook.status().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 383,
          "content": "        assert!(status.has_pending);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 384,
          "content": "        assert_eq!(status.file_count, 1);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 385,
          "content": "        assert_eq!(status.edit_count, 1);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 386,
          "content": "        assert_eq!(status.prompt_count, 1);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 387,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 388,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 389,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 390,
          "content": "    fn test_capture_hook_multiple_edits() {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 391,
          "content": "        let (dir, _repo) = create_test_repo();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 392,
          "content": "        let hook = CaptureHook::new(dir.path()).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 393,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 394,
          "content": "        // First edit",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 395,
          "content": "        hook.on_file_change(HookInput {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 396,
          "content": "            tool: \"Write\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 397,
          "content": "            file_path: \"test.rs\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 398,
          "content": "            prompt: \"Create file\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 399,
          "content": "            old_content: None,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 400,
          "content": "            new_content: \"line1\\n\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 401,
          "content": "        })",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 402,
          "content": "        .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 403,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 404,
          "content": "        // Second edit to same file",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 405,
          "content": "        hook.on_file_change(HookInput {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 406,
          "content": "            tool: \"Edit\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 407,
          "content": "            file_path: \"test.rs\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 408,
          "content": "            prompt: \"Add line\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 409,
          "content": "            old_content: Some(\"line1\\n\".to_string()),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 410,
          "content": "            new_content: \"line1\\nline2\\n\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 411,
          "content": "        })",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 412,
          "content": "        .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 413,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 414,
          "content": "        let status = hook.status().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 415,
          "content": "        assert_eq!(status.file_count, 1);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 416,
          "content": "        assert_eq!(status.edit_count, 2);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 417,
          "content": "        assert_eq!(status.prompt_count, 2);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 418,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 419,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 420,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 421,
          "content": "    fn test_capture_hook_status_empty() {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 422,
          "content": "        let (dir, _repo) = create_test_repo();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 423,
          "content": "        let hook = CaptureHook::new(dir.path()).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 424,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 425,
          "content": "        let status = hook.status().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 426,
          "content": "        assert!(!status.has_pending);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 427,
          "content": "        assert_eq!(status.file_count, 0);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 428,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 429,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 430,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 431,
          "content": "    fn test_capture_hook_clear() {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 432,
          "content": "        let (dir, _repo) = create_test_repo();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 433,
          "content": "        let hook = CaptureHook::new(dir.path()).unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 434,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 435,
          "content": "        // Add a change",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 436,
          "content": "        hook.on_file_change(HookInput {",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 437,
          "content": "            tool: \"Write\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 438,
          "content": "            file_path: \"test.rs\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 439,
          "content": "            prompt: \"test\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 440,
          "content": "            old_content: None,",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 441,
          "content": "            new_content: \"content\\n\".to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 442,
          "content": "        })",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 443,
          "content": "        .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 444,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 445,
          "content": "        assert!(hook.status().unwrap().has_pending);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 446,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 447,
          "content": "        // Clear",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 448,
          "content": "        hook.clear_pending().unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 449,
          "content": "        assert!(!hook.status().unwrap().has_pending);",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 450,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        },
        {
          "line_number": 451,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a"
          },
          "edit_id": "95c8b4c9-27ff-4c0b-8a57-47212493829a",
          "prompt_index": 0,
          "confidence": 1.0
        }
      ],
      "summary": {
        "total_lines": 451,
        "ai_lines": 451,
        "ai_modified_lines": 0,
        "human_lines": 0,
        "original_lines": 0,
        "unknown_lines": 0
      }
    },
    {
      "path": "src/capture/threeway.rs",
      "lines": [
        {
          "line_number": 1,
          "content": "use std::collections::{HashMap, HashSet};",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 2,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 3,
          "content": "use similar::{ChangeTag, TextDiff};",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 4,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 5,
          "content": "use crate::capture::snapshot::{",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 6,
          "content": "    FileAttributionResult, FileEditHistory, LineAttribution, LineSource,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 7,
          "content": "};",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 8,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 9,
          "content": "/// Normalize a line for comparison purposes.",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 10,
          "content": "/// - Trims trailing whitespace (but preserves leading indentation)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 11,
          "content": "/// - Normalizes line endings",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 12,
          "content": "/// - Handles cross-platform line ending differences",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 13,
          "content": "fn normalize_line(line: &str) -> String {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 14,
          "content": "    line.trim_end().to_string()",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 15,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 16,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 17,
          "content": "/// Normalize a line for use as a hash key.",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 18,
          "content": "/// Uses the same normalization as normalize_line.",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 19,
          "content": "fn normalize_for_key(line: &str) -> String {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 20,
          "content": "    normalize_line(line)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 21,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 22,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 23,
          "content": "/// Performs three-way attribution analysis",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 24,
          "content": "///",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 25,
          "content": "/// Given:",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 26,
          "content": "/// - Original content (before any AI edits)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 27,
          "content": "/// - AI edit history (sequence of AI changes)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 28,
          "content": "/// - Final content (what's being committed)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 29,
          "content": "///",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 30,
          "content": "/// Determines for each line in final content:",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 31,
          "content": "/// - Was it from the original file?",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 32,
          "content": "/// - Was it added by AI (and which edit/prompt)?",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 33,
          "content": "/// - Was it added by AI but modified by human?",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 34,
          "content": "/// - Was it added by human after AI edits?",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 35,
          "content": "pub struct ThreeWayAnalyzer;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 36,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 37,
          "content": "impl ThreeWayAnalyzer {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 38,
          "content": "    /// Analyze a file's final content against its edit history",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 39,
          "content": "    pub fn analyze(history: &FileEditHistory, final_content: &str) -> FileAttributionResult {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 40,
          "content": "        let final_lines: Vec<&str> = final_content.lines().collect();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 41,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 42,
          "content": "        // Build lookup tables for efficient matching",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 43,
          "content": "        let original_lines = build_line_set(&history.original.content);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 44,
          "content": "        let ai_line_sources = build_ai_line_map(history);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 45,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 46,
          "content": "        // Analyze each line in the final content",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 47,
          "content": "        let mut attributions = Vec::with_capacity(final_lines.len());",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 48,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 49,
          "content": "        for (idx, line) in final_lines.iter().enumerate() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 50,
          "content": "            let line_number = (idx + 1) as u32;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 51,
          "content": "            let attribution = attribute_line(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 52,
          "content": "                line,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 53,
          "content": "                line_number,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 54,
          "content": "                &original_lines,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 55,
          "content": "                &ai_line_sources,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 56,
          "content": "                history,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 57,
          "content": "            );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 58,
          "content": "            attributions.push(attribution);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 59,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 60,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 61,
          "content": "        // Post-process: improve attribution using context",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 62,
          "content": "        improve_attributions_with_context(&mut attributions, history, final_content);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 63,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 64,
          "content": "        let summary = FileAttributionResult::compute_summary(&attributions);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 65,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 66,
          "content": "        FileAttributionResult {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 67,
          "content": "            path: history.path.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 68,
          "content": "            lines: attributions,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 69,
          "content": "            summary,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 70,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 71,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 72,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 73,
          "content": "    /// Analyze with position-aware diff for better accuracy",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 74,
          "content": "    pub fn analyze_with_diff(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 75,
          "content": "        history: &FileEditHistory,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 76,
          "content": "        final_content: &str,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 77,
          "content": "    ) -> FileAttributionResult {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 78,
          "content": "        let final_lines: Vec<&str> = final_content.lines().collect();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 79,
          "content": "        let mut attributions = Vec::with_capacity(final_lines.len());",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 80,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 81,
          "content": "        // If no AI edits, everything is original or human",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 82,
          "content": "        if history.edits.is_empty() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 83,
          "content": "            for (idx, line) in final_lines.iter().enumerate() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 84,
          "content": "                let line_number = (idx + 1) as u32;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 85,
          "content": "                let source = if line_in_content(line, &history.original.content) {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 86,
          "content": "                    LineSource::Original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 87,
          "content": "                } else {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 88,
          "content": "                    LineSource::Human",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 89,
          "content": "                };",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 90,
          "content": "                attributions.push(LineAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 91,
          "content": "                    line_number,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 92,
          "content": "                    content: line.to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 93,
          "content": "                    source,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 94,
          "content": "                    edit_id: None,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 95,
          "content": "                    prompt_index: None,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 96,
          "content": "                    confidence: 1.0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 97,
          "content": "                });",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 98,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 99,
          "content": "            let summary = FileAttributionResult::compute_summary(&attributions);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 100,
          "content": "            return FileAttributionResult {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 101,
          "content": "                path: history.path.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 102,
          "content": "                lines: attributions,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 103,
          "content": "                summary,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 104,
          "content": "            };",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 105,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 106,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 107,
          "content": "        // Perform diff-based analysis",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 108,
          "content": "        // Compare: original -> final, and latest_ai -> final",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 109,
          "content": "        let latest_ai = history.latest_ai_content();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 110,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 111,
          "content": "        // Build lookup sets",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 112,
          "content": "        let original_lines = build_line_set(&history.original.content);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 113,
          "content": "        let ai_line_map = build_ai_line_map(history);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 114,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 115,
          "content": "        // Track which final lines match AI content",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 116,
          "content": "        let ai_to_final_mapping = diff_map_lines(&latest_ai.content, final_content);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 117,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 118,
          "content": "        // Track which final lines match original content",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 119,
          "content": "        let original_to_final_mapping = diff_map_lines(&history.original.content, final_content);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 120,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 121,
          "content": "        // Build reverse map: final line index -> source",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 122,
          "content": "        let mut final_line_sources: HashMap<usize, (LineSource, Option<String>, Option<u32>)> =",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 123,
          "content": "            HashMap::new();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 124,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 125,
          "content": "        // First pass: mark lines that exist in original as Original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 126,
          "content": "        // (Lines in both original and AI should be Original - they weren't changed)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 127,
          "content": "        for (_, final_idx) in &original_to_final_mapping {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 128,
          "content": "            final_line_sources.insert(*final_idx, (LineSource::Original, None, None));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 129,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 130,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 131,
          "content": "        // Second pass: mark lines from AI edits that weren't mapped from original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 132,
          "content": "        // Key insight: if a final line has position mapping from AI but NOT from original,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 133,
          "content": "        // it's AI-generated - even if the content happens to match something in original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 134,
          "content": "        // (e.g., a `}` added by AI shouldn't be marked as Original just because",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 135,
          "content": "        // the original file also had a `}` at a different position)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 136,
          "content": "        for (ai_idx, final_idx) in &ai_to_final_mapping {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 137,
          "content": "            // Skip if already marked (came from original position mapping)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 138,
          "content": "            if final_line_sources.contains_key(final_idx) {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 139,
          "content": "                continue;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 140,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 141,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 142,
          "content": "            let ai_line = latest_ai.lines().get(*ai_idx).copied().unwrap_or(\"\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 143,
          "content": "            let normalized = normalize_for_key(ai_line);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 144,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 145,
          "content": "            // This line was mapped from AI output and NOT from original position",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 146,
          "content": "            // So it's AI-generated (regardless of whether similar content exists in original)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 147,
          "content": "            if let Some((edit_id, prompt_idx)) = ai_line_map.get(&normalized) {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 148,
          "content": "                final_line_sources.insert(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 149,
          "content": "                    *final_idx,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 150,
          "content": "                    (",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 151,
          "content": "                        LineSource::AI {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 152,
          "content": "                            edit_id: edit_id.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 153,
          "content": "                        },",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 154,
          "content": "                        Some(edit_id.clone()),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 155,
          "content": "                        Some(*prompt_idx),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 156,
          "content": "                    ),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 157,
          "content": "                );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 158,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 159,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 160,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 161,
          "content": "        // Third pass: check unmapped lines",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 162,
          "content": "        for (idx, line) in final_lines.iter().enumerate() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 163,
          "content": "            if final_line_sources.contains_key(&idx) {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 164,
          "content": "                continue;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 165,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 166,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 167,
          "content": "            let normalized = normalize_for_key(line);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 168,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 169,
          "content": "            // Check if line exists in original first",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 170,
          "content": "            if original_lines.contains(&normalized) {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 171,
          "content": "                final_line_sources.insert(idx, (LineSource::Original, None, None));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 172,
          "content": "                continue;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 173,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 174,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 175,
          "content": "            // Check if line is in AI output (but not original)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 176,
          "content": "            if let Some((edit_id, prompt_idx)) = ai_line_map.get(&normalized) {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 177,
          "content": "                final_line_sources.insert(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 178,
          "content": "                    idx,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 179,
          "content": "                    (",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 180,
          "content": "                        LineSource::AI {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 181,
          "content": "                            edit_id: edit_id.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 182,
          "content": "                        },",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 183,
          "content": "                        Some(edit_id.clone()),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 184,
          "content": "                        Some(*prompt_idx),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 185,
          "content": "                    ),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 186,
          "content": "                );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 187,
          "content": "                continue;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 188,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 189,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 190,
          "content": "            // Check if this is similar to an AI line (modified)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 191,
          "content": "            if let Some((edit_id, prompt_idx, similarity)) =",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 192,
          "content": "                find_similar_ai_line(line, &ai_line_map, 0.6)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 193,
          "content": "            {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 194,
          "content": "                final_line_sources.insert(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 195,
          "content": "                    idx,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 196,
          "content": "                    (",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 197,
          "content": "                        LineSource::AIModified {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 198,
          "content": "                            edit_id: edit_id.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 199,
          "content": "                            similarity,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 200,
          "content": "                        },",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 201,
          "content": "                        Some(edit_id),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 202,
          "content": "                        Some(prompt_idx),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 203,
          "content": "                    ),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 204,
          "content": "                );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 205,
          "content": "                continue;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 206,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 207,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 208,
          "content": "            // New line added by human",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 209,
          "content": "            final_line_sources.insert(idx, (LineSource::Human, None, None));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 210,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 211,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 212,
          "content": "        // Build final attributions",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 213,
          "content": "        for (idx, line) in final_lines.iter().enumerate() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 214,
          "content": "            let line_number = (idx + 1) as u32;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 215,
          "content": "            let (source, edit_id, prompt_index) = final_line_sources",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 216,
          "content": "                .get(&idx)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 217,
          "content": "                .cloned()",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 218,
          "content": "                .unwrap_or((LineSource::Unknown, None, None));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 219,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 220,
          "content": "            let confidence = match &source {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 221,
          "content": "                LineSource::Original => 1.0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 222,
          "content": "                LineSource::AI { .. } => 1.0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 223,
          "content": "                LineSource::AIModified { similarity, .. } => *similarity,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 224,
          "content": "                LineSource::Human => 0.9,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 225,
          "content": "                LineSource::Unknown => 0.5,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 226,
          "content": "            };",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 227,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 228,
          "content": "            attributions.push(LineAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 229,
          "content": "                line_number,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 230,
          "content": "                content: line.to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 231,
          "content": "                source,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 232,
          "content": "                edit_id,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 233,
          "content": "                prompt_index,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 234,
          "content": "                confidence,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 235,
          "content": "            });",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 236,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 237,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 238,
          "content": "        let summary = FileAttributionResult::compute_summary(&attributions);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 239,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 240,
          "content": "        FileAttributionResult {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 241,
          "content": "            path: history.path.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 242,
          "content": "            lines: attributions,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 243,
          "content": "            summary,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 244,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 245,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 246,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 247,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 248,
          "content": "/// Build a set of normalized lines from content for fast lookup",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 249,
          "content": "fn build_line_set(content: &str) -> HashSet<String> {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 250,
          "content": "    content.lines().map(normalize_for_key).collect()",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 251,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 252,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 253,
          "content": "/// Build a map from normalized line content -> (edit_id, prompt_index) for all AI edits",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 254,
          "content": "///",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 255,
          "content": "/// IMPORTANT: All lines in an AI edit's `after` content are considered AI-generated,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 256,
          "content": "/// not just lines that differ from `before`. This is because when AI writes/edits a file,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 257,
          "content": "/// it produces the entire output - even if some lines coincidentally match the original,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 258,
          "content": "/// the AI chose to include them.",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 259,
          "content": "///",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 260,
          "content": "/// Lines are normalized (trailing whitespace trimmed) to handle git/editor differences.",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 261,
          "content": "fn build_ai_line_map(history: &FileEditHistory) -> HashMap<String, (String, u32)> {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 262,
          "content": "    let mut map = HashMap::new();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 263,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 264,
          "content": "    // Process edits in order - later edits override earlier ones",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 265,
          "content": "    for edit in &history.edits {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 266,
          "content": "        // ALL lines in the AI's output are AI-generated",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 267,
          "content": "        // This ensures complete file rewrites are properly attributed",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 268,
          "content": "        for line in edit.after.content.lines() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 269,
          "content": "            map.insert(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 270,
          "content": "                normalize_for_key(line),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 271,
          "content": "                (edit.edit_id.clone(), edit.prompt_index),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 272,
          "content": "            );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 273,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 274,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 275,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 276,
          "content": "    map",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 277,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 278,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 279,
          "content": "/// Check if a normalized line exists in content",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 280,
          "content": "fn line_in_content(line: &str, content: &str) -> bool {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 281,
          "content": "    let normalized = normalize_for_key(line);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 282,
          "content": "    content.lines().any(|l| normalize_for_key(l) == normalized)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 283,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 284,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 285,
          "content": "/// Map line indices from source to target using diff",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 286,
          "content": "fn diff_map_lines(source: &str, target: &str) -> Vec<(usize, usize)> {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 287,
          "content": "    let diff = TextDiff::from_lines(source, target);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 288,
          "content": "    let mut mappings = Vec::new();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 289,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 290,
          "content": "    let mut source_idx = 0usize;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 291,
          "content": "    let mut target_idx = 0usize;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 292,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 293,
          "content": "    for change in diff.iter_all_changes() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 294,
          "content": "        match change.tag() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 295,
          "content": "            ChangeTag::Equal => {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 296,
          "content": "                mappings.push((source_idx, target_idx));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 297,
          "content": "                source_idx += 1;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 298,
          "content": "                target_idx += 1;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 299,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 300,
          "content": "            ChangeTag::Delete => {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 301,
          "content": "                source_idx += 1;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 302,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 303,
          "content": "            ChangeTag::Insert => {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 304,
          "content": "                target_idx += 1;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 305,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 306,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 307,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 308,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 309,
          "content": "    mappings",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 310,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 311,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 312,
          "content": "/// Attribute a single line",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 313,
          "content": "///",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 314,
          "content": "/// Priority order:",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 315,
          "content": "/// 1. Original - if line existed before AI edits and is unchanged",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 316,
          "content": "/// 2. AI - if line is in the AI edit output but NOT in original (actually changed)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 317,
          "content": "/// 3. AIModified - if line is similar to an AI line",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 318,
          "content": "/// 4. Human - line was added after AI edits",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 319,
          "content": "///",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 320,
          "content": "/// All lookups use normalized line content to handle whitespace differences.",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 321,
          "content": "fn attribute_line(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 322,
          "content": "    line: &str,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 323,
          "content": "    line_number: u32,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 324,
          "content": "    original_lines: &HashSet<String>,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 325,
          "content": "    ai_line_sources: &HashMap<String, (String, u32)>,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 326,
          "content": "    _history: &FileEditHistory,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 327,
          "content": ") -> LineAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 328,
          "content": "    let normalized = normalize_for_key(line);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 329,
          "content": "    let in_original = original_lines.contains(&normalized);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 330,
          "content": "    let in_ai = ai_line_sources.get(&normalized);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 331,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 332,
          "content": "    // If line exists in original AND in AI output, it's unchanged - mark as Original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 333,
          "content": "    // This prevents counting context lines that AI included but didn't change",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 334,
          "content": "    if in_original && in_ai.is_some() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 335,
          "content": "        return LineAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 336,
          "content": "            line_number,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 337,
          "content": "            content: line.to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 338,
          "content": "            source: LineSource::Original,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 339,
          "content": "            edit_id: None,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 340,
          "content": "            prompt_index: None,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 341,
          "content": "            confidence: 1.0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 342,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 343,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 344,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 345,
          "content": "    // If line is in original but NOT in AI output, it's still Original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 346,
          "content": "    // (The AI didn't touch this line at all)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 347,
          "content": "    if in_original {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 348,
          "content": "        return LineAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 349,
          "content": "            line_number,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 350,
          "content": "            content: line.to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 351,
          "content": "            source: LineSource::Original,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 352,
          "content": "            edit_id: None,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 353,
          "content": "            prompt_index: None,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 354,
          "content": "            confidence: 1.0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 355,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 356,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 357,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 358,
          "content": "    // If line is in AI output but NOT in original, it's AI-generated",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 359,
          "content": "    if let Some((edit_id, prompt_idx)) = in_ai {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 360,
          "content": "        return LineAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 361,
          "content": "            line_number,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 362,
          "content": "            content: line.to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 363,
          "content": "            source: LineSource::AI {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 364,
          "content": "                edit_id: edit_id.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 365,
          "content": "            },",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 366,
          "content": "            edit_id: Some(edit_id.clone()),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 367,
          "content": "            prompt_index: Some(*prompt_idx),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 368,
          "content": "            confidence: 1.0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 369,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 370,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 371,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 372,
          "content": "    // Check if line is similar to an AI line (human modified AI output)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 373,
          "content": "    if let Some((edit_id, prompt_idx, similarity)) =",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 374,
          "content": "        find_similar_ai_line(line, ai_line_sources, 0.6)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 375,
          "content": "    {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 376,
          "content": "        return LineAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 377,
          "content": "            line_number,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 378,
          "content": "            content: line.to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 379,
          "content": "            source: LineSource::AIModified {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 380,
          "content": "                edit_id: edit_id.clone(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 381,
          "content": "                similarity,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 382,
          "content": "            },",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 383,
          "content": "            edit_id: Some(edit_id),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 384,
          "content": "            prompt_index: Some(prompt_idx),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 385,
          "content": "            confidence: similarity,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 386,
          "content": "        };",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 387,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 388,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 389,
          "content": "    // Line doesn't exist in original or AI output - must be human-added",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 390,
          "content": "    LineAttribution {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 391,
          "content": "        line_number,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 392,
          "content": "        content: line.to_string(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 393,
          "content": "        source: LineSource::Human,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 394,
          "content": "        edit_id: None,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 395,
          "content": "        prompt_index: None,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 396,
          "content": "        confidence: 0.9,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 397,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 398,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 399,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 400,
          "content": "/// Find a similar AI line using edit distance",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 401,
          "content": "///",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 402,
          "content": "/// Note: Empty/whitespace-only lines are handled by exact matching in attribute_line,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 403,
          "content": "/// so this function focuses on non-trivial content similarity.",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 404,
          "content": "fn find_similar_ai_line(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 405,
          "content": "    line: &str,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 406,
          "content": "    ai_lines: &HashMap<String, (String, u32)>,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 407,
          "content": "    threshold: f64,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 408,
          "content": ") -> Option<(String, u32, f64)> {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 409,
          "content": "    let line_trimmed = line.trim();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 410,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 411,
          "content": "    // Empty lines should be handled by exact matching, not similarity",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 412,
          "content": "    // (empty lines match other empty lines with 100% similarity via normalize_for_key)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 413,
          "content": "    if line_trimmed.is_empty() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 414,
          "content": "        return None;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 415,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 416,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 417,
          "content": "    let mut best_match: Option<(String, u32, f64)> = None;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 418,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 419,
          "content": "    for (ai_line, (edit_id, prompt_idx)) in ai_lines {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 420,
          "content": "        let ai_trimmed = ai_line.trim();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 421,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 422,
          "content": "        // Skip empty AI lines in similarity comparison",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 423,
          "content": "        if ai_trimmed.is_empty() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 424,
          "content": "            continue;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 425,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 426,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 427,
          "content": "        let similarity = compute_similarity(line_trimmed, ai_trimmed);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 428,
          "content": "        if similarity >= threshold",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 429,
          "content": "            && (best_match.is_none() || similarity > best_match.as_ref().unwrap().2)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 430,
          "content": "        {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 431,
          "content": "            best_match = Some((edit_id.clone(), *prompt_idx, similarity));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 432,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 433,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 434,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 435,
          "content": "    best_match",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 436,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 437,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 438,
          "content": "/// Compute similarity between two strings (0.0 - 1.0)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 439,
          "content": "fn compute_similarity(a: &str, b: &str) -> f64 {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 440,
          "content": "    if a == b {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 441,
          "content": "        return 1.0;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 442,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 443,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 444,
          "content": "    if a.is_empty() || b.is_empty() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 445,
          "content": "        return 0.0;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 446,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 447,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 448,
          "content": "    // Use longest common subsequence ratio",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 449,
          "content": "    let lcs_len = longest_common_subsequence(a, b);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 450,
          "content": "    let max_len = a.len().max(b.len()) as f64;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 451,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 452,
          "content": "    lcs_len as f64 / max_len",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 453,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 454,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 455,
          "content": "/// Compute length of longest common subsequence",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 456,
          "content": "fn longest_common_subsequence(a: &str, b: &str) -> usize {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 457,
          "content": "    let a_chars: Vec<char> = a.chars().collect();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 458,
          "content": "    let b_chars: Vec<char> = b.chars().collect();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 459,
          "content": "    let m = a_chars.len();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 460,
          "content": "    let n = b_chars.len();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 461,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 462,
          "content": "    // Optimization: if strings are very different in length, quick exit",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 463,
          "content": "    if (m as f64 / n as f64) < 0.5 || (n as f64 / m as f64) < 0.5 {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 464,
          "content": "        return 0;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 465,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 466,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 467,
          "content": "    let mut dp = vec![vec![0usize; n + 1]; m + 1];",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 468,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 469,
          "content": "    for i in 1..=m {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 470,
          "content": "        for j in 1..=n {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 471,
          "content": "            if a_chars[i - 1] == b_chars[j - 1] {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 472,
          "content": "                dp[i][j] = dp[i - 1][j - 1] + 1;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 473,
          "content": "            } else {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 474,
          "content": "                dp[i][j] = dp[i - 1][j].max(dp[i][j - 1]);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 475,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 476,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 477,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 478,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 479,
          "content": "    dp[m][n]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 480,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 481,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 482,
          "content": "/// Improve attributions using contextual information",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 483,
          "content": "fn improve_attributions_with_context(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 484,
          "content": "    attributions: &mut [LineAttribution],",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 485,
          "content": "    _history: &FileEditHistory,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 486,
          "content": "    _final_content: &str,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 487,
          "content": ") {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 488,
          "content": "    // If we have unknown lines surrounded by AI lines from the same edit,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 489,
          "content": "    // they might be AI lines that were modified",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 490,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 491,
          "content": "    let len = attributions.len();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 492,
          "content": "    if len < 3 {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 493,
          "content": "        return;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 494,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 495,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 496,
          "content": "    for i in 1..len - 1 {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 497,
          "content": "        if attributions[i].source == LineSource::Unknown {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 498,
          "content": "            // Check surrounding lines",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 499,
          "content": "            let prev_edit = attributions[i - 1].edit_id.clone();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 500,
          "content": "            let next_edit = attributions[i + 1].edit_id.clone();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 501,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 502,
          "content": "            if prev_edit.is_some() && prev_edit == next_edit {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 503,
          "content": "                // Likely an AI line that was modified",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 504,
          "content": "                attributions[i].source = LineSource::AIModified {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 505,
          "content": "                    edit_id: prev_edit.clone().unwrap(),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 506,
          "content": "                    similarity: 0.5,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 507,
          "content": "                };",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 508,
          "content": "                attributions[i].edit_id = prev_edit;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 509,
          "content": "                attributions[i].prompt_index = attributions[i - 1].prompt_index;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 510,
          "content": "                attributions[i].confidence = 0.5;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 511,
          "content": "            }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 512,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 513,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 514,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 515,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 516,
          "content": "#[cfg(test)]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 517,
          "content": "mod tests {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 518,
          "content": "    use super::*;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 519,
          "content": "    use crate::capture::snapshot::AIEdit;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 520,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 521,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 522,
          "content": "    fn test_simple_ai_addition() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 523,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(\"line1\\nline2\\n\"));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 524,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 525,
          "content": "        history.add_edit(AIEdit::new(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 526,
          "content": "            \"Add line3\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 527,
          "content": "            0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 528,
          "content": "            \"Edit\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 529,
          "content": "            \"line1\\nline2\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 530,
          "content": "            \"line1\\nline2\\nline3\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 531,
          "content": "        ));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 532,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 533,
          "content": "        let result = ThreeWayAnalyzer::analyze(&history, \"line1\\nline2\\nline3\\n\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 534,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 535,
          "content": "        // line1 and line2 exist in both original and AI output -> Original (unchanged)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 536,
          "content": "        // line3 is only in AI output -> AI (actually added by AI)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 537,
          "content": "        assert_eq!(result.summary.ai_lines, 1);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 538,
          "content": "        assert_eq!(result.summary.original_lines, 2);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 539,
          "content": "        assert_eq!(result.summary.human_lines, 0);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 540,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 541,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 542,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 543,
          "content": "    fn test_human_modification_after_ai() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 544,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(\"line1\\n\"));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 545,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 546,
          "content": "        history.add_edit(AIEdit::new(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 547,
          "content": "            \"Add lines\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 548,
          "content": "            0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 549,
          "content": "            \"Edit\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 550,
          "content": "            \"line1\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 551,
          "content": "            \"line1\\nAI line\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 552,
          "content": "        ));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 553,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 554,
          "content": "        // Human adds a line and modifies AI line",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 555,
          "content": "        let final_content = \"line1\\nAI line modified\\nhuman line\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 556,
          "content": "        let result = ThreeWayAnalyzer::analyze(&history, final_content);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 557,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 558,
          "content": "        // \"line1\" is in both original and AI output -> Original (unchanged)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 559,
          "content": "        assert_eq!(result.summary.original_lines, 1);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 560,
          "content": "        // \"AI line modified\" should be detected as AIModified (similar to \"AI line\")",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 561,
          "content": "        // \"human line\" should be detected as Human (not in original or AI)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 562,
          "content": "        assert_eq!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 563,
          "content": "            result.summary.ai_modified_lines + result.summary.human_lines,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 564,
          "content": "            2,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 565,
          "content": "            \"Should have 2 changed lines (modified + human)\"",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 566,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 567,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 568,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 569,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 570,
          "content": "    fn test_line_shift() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 571,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(\"line1\\nline2\\n\"));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 572,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 573,
          "content": "        history.add_edit(AIEdit::new(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 574,
          "content": "            \"Add AI content\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 575,
          "content": "            0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 576,
          "content": "            \"Edit\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 577,
          "content": "            \"line1\\nline2\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 578,
          "content": "            \"line1\\nline2\\nAI added\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 579,
          "content": "        ));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 580,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 581,
          "content": "        // Human inserts line at beginning",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 582,
          "content": "        let final_content = \"new first line\\nline1\\nline2\\nAI added\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 583,
          "content": "        let result = ThreeWayAnalyzer::analyze_with_diff(&history, final_content);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 584,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 585,
          "content": "        // \"new first line\" is Human (not in original or AI output)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 586,
          "content": "        // \"line1\", \"line2\" are in both original and AI output -> Original (unchanged)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 587,
          "content": "        // \"AI added\" is only in AI output -> AI",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 588,
          "content": "        assert_eq!(result.summary.human_lines, 1);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 589,
          "content": "        assert_eq!(result.summary.ai_lines, 1);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 590,
          "content": "        assert_eq!(result.summary.original_lines, 2);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 591,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 592,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 593,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 594,
          "content": "    fn test_similarity_computation() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 595,
          "content": "        assert_eq!(compute_similarity(\"hello\", \"hello\"), 1.0);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 596,
          "content": "        // Completely different strings",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 597,
          "content": "        assert!(compute_similarity(\"abc\", \"xyz\") < 0.3);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 598,
          "content": "        // Similar strings with comparable length should have high similarity",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 599,
          "content": "        assert!(compute_similarity(\"println(hello)\", \"println(world)\") > 0.6);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 600,
          "content": "        // Modified line detection",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 601,
          "content": "        assert!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 602,
          "content": "            compute_similarity(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 603,
          "content": "                \"    println!(\\\"hello\\\");\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 604,
          "content": "                \"    println!(\\\"hello, world!\\\");\"",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 605,
          "content": "            ) > 0.6",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 606,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 607,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 608,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 609,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 610,
          "content": "    fn test_multiple_ai_edits() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 611,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(\"original\\n\"));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 612,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 613,
          "content": "        history.add_edit(AIEdit::new(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 614,
          "content": "            \"First prompt\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 615,
          "content": "            0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 616,
          "content": "            \"Edit\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 617,
          "content": "            \"original\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 618,
          "content": "            \"original\\nfirst AI\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 619,
          "content": "        ));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 620,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 621,
          "content": "        history.add_edit(AIEdit::new(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 622,
          "content": "            \"Second prompt\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 623,
          "content": "            1,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 624,
          "content": "            \"Edit\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 625,
          "content": "            \"original\\nfirst AI\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 626,
          "content": "            \"original\\nfirst AI\\nsecond AI\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 627,
          "content": "        ));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 628,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 629,
          "content": "        let result = ThreeWayAnalyzer::analyze(&history, \"original\\nfirst AI\\nsecond AI\\n\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 630,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 631,
          "content": "        // \"original\" is in the original file AND in AI outputs -> Original (unchanged)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 632,
          "content": "        // \"first AI\" is NOT in original, added by AI -> AI",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 633,
          "content": "        // \"second AI\" is NOT in original, added by AI -> AI",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 634,
          "content": "        assert_eq!(result.summary.original_lines, 1);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 635,
          "content": "        assert_eq!(result.summary.ai_lines, 2);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 636,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 637,
          "content": "        // Check that AI lines have correct prompt indices",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 638,
          "content": "        let first_ai = result",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 639,
          "content": "            .lines",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 640,
          "content": "            .iter()",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 641,
          "content": "            .find(|l| l.content == \"first AI\")",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 642,
          "content": "            .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 643,
          "content": "        // first AI appears in edit 0's output and edit 1's output, later wins",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 644,
          "content": "        assert_eq!(first_ai.prompt_index, Some(1));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 645,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 646,
          "content": "        let second_ai = result",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 647,
          "content": "            .lines",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 648,
          "content": "            .iter()",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 649,
          "content": "            .find(|l| l.content == \"second AI\")",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 650,
          "content": "            .unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 651,
          "content": "        assert_eq!(second_ai.prompt_index, Some(1));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 652,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 653,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 654,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 655,
          "content": "    fn test_only_original_no_ai_edits() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 656,
          "content": "        // Test that without AI edits, original lines stay original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 657,
          "content": "        let history = FileEditHistory::new(\"test.rs\", Some(\"line1\\nline2\\n\"));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 658,
          "content": "        // No AI edits added",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 659,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 660,
          "content": "        let result = ThreeWayAnalyzer::analyze(&history, \"line1\\nline2\\nline3\\n\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 661,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 662,
          "content": "        // line1, line2 are original (no AI touched them)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 663,
          "content": "        // line3 is human (added without AI)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 664,
          "content": "        assert_eq!(result.summary.original_lines, 2);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 665,
          "content": "        assert_eq!(result.summary.human_lines, 1);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 666,
          "content": "        assert_eq!(result.summary.ai_lines, 0);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 667,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 668,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 669,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 670,
          "content": "    fn test_whitespace_normalization() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 671,
          "content": "        // Test that trailing whitespace differences don't affect attribution",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 672,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(\"\"));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 673,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 674,
          "content": "        // AI generates lines with trailing spaces",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 675,
          "content": "        history.add_edit(AIEdit::new(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 676,
          "content": "            \"Generate code\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 677,
          "content": "            0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 678,
          "content": "            \"Write\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 679,
          "content": "            \"\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 680,
          "content": "            \"fn main() {  \\n    println!(\\\"hello\\\");  \\n}\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 681,
          "content": "        ));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 682,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 683,
          "content": "        // Final commit has trailing spaces stripped (common git behavior)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 684,
          "content": "        let final_content = \"fn main() {\\n    println!(\\\"hello\\\");\\n}\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 685,
          "content": "        let result = ThreeWayAnalyzer::analyze(&history, final_content);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 686,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 687,
          "content": "        // All lines should be AI despite whitespace differences",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 688,
          "content": "        assert_eq!(result.summary.ai_lines, 3, \"All lines should be AI\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 689,
          "content": "        assert_eq!(result.summary.human_lines, 0, \"No human lines expected\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 690,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 691,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 692,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 693,
          "content": "    fn test_empty_line_attribution() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 694,
          "content": "        // Test that empty lines in AI output are properly attributed",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 695,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(\"\"));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 696,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 697,
          "content": "        // AI generates code with empty lines",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 698,
          "content": "        history.add_edit(AIEdit::new(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 699,
          "content": "            \"Generate code with spacing\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 700,
          "content": "            0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 701,
          "content": "            \"Write\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 702,
          "content": "            \"\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 703,
          "content": "            \"fn main() {\\n\\n    println!(\\\"hello\\\");\\n\\n}\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 704,
          "content": "        ));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 705,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 706,
          "content": "        let final_content = \"fn main() {\\n\\n    println!(\\\"hello\\\");\\n\\n}\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 707,
          "content": "        let result = ThreeWayAnalyzer::analyze(&history, final_content);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 708,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 709,
          "content": "        // All lines including empty ones should be AI",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 710,
          "content": "        assert_eq!(result.summary.ai_lines, 5, \"All 5 lines should be AI\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 711,
          "content": "        assert_eq!(result.summary.human_lines, 0, \"No human lines expected\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 712,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 713,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 714,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 715,
          "content": "    fn test_tabs_vs_spaces() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 716,
          "content": "        // Test that different indentation styles still match",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 717,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(\"\"));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 718,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 719,
          "content": "        // AI generates with spaces",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 720,
          "content": "        history.add_edit(AIEdit::new(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 721,
          "content": "            \"Generate code\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 722,
          "content": "            0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 723,
          "content": "            \"Write\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 724,
          "content": "            \"\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 725,
          "content": "            \"fn main() {\\n    code();\\n}\\n\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 726,
          "content": "        ));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 727,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 728,
          "content": "        // Final uses same content (tabs would need different handling)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 729,
          "content": "        let final_content = \"fn main() {\\n    code();\\n}\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 730,
          "content": "        let result = ThreeWayAnalyzer::analyze(&history, final_content);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 731,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 732,
          "content": "        assert_eq!(result.summary.ai_lines, 3);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 733,
          "content": "        assert_eq!(result.summary.human_lines, 0);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 734,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 735,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 736,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 737,
          "content": "    fn test_diff_unmapped_lines_still_attributed_correctly() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 738,
          "content": "        // This test verifies that lines existing in BOTH original and AI output are Original,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 739,
          "content": "        // while lines only in AI output are AI.",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 740,
          "content": "        let original = \"fn foo() {\\n    old_code();\\n}\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 741,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(original));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 742,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 743,
          "content": "        // AI rewrites the function with new content",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 744,
          "content": "        // \"fn foo() {\" and \"}\" exist in both original and AI output",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 745,
          "content": "        let ai_output = \"fn foo() {\\n    new_code();\\n    more_code();\\n}\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 746,
          "content": "        history.add_edit(AIEdit::new(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 747,
          "content": "            \"Rewrite function\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 748,
          "content": "            0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 749,
          "content": "            \"Edit\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 750,
          "content": "            original,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 751,
          "content": "            ai_output,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 752,
          "content": "        ));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 753,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 754,
          "content": "        // Final content matches AI output exactly",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 755,
          "content": "        let result = ThreeWayAnalyzer::analyze_with_diff(&history, ai_output);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 756,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 757,
          "content": "        // Lines in both original AND AI output  Original (unchanged)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 758,
          "content": "        // \"fn foo() {\" and \"}\" are in both  2 Original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 759,
          "content": "        // \"new_code();\" and \"more_code();\" are only in AI  2 AI",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 760,
          "content": "        assert_eq!(result.summary.ai_lines, 2, \"2 lines only in AI output\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 761,
          "content": "        assert_eq!(result.summary.human_lines, 0, \"No human lines expected\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 762,
          "content": "        assert_eq!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 763,
          "content": "            result.summary.original_lines, 2,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 764,
          "content": "            \"2 lines unchanged from original (fn foo and closing brace)\"",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 765,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 766,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 767,
          "content": "        // Verify the closing brace is Original (exists in both original and AI)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 768,
          "content": "        let closing_brace = result.lines.iter().find(|l| l.content == \"}\").unwrap();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 769,
          "content": "        assert!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 770,
          "content": "            matches!(closing_brace.source, LineSource::Original),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 771,
          "content": "            \"Closing brace should be Original (exists in both), got {:?}\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 772,
          "content": "            closing_brace.source",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 773,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 774,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 775,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 776,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 777,
          "content": "    fn test_debug_attribution_flow() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 778,
          "content": "        // Debug test to verify attribution logic",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 779,
          "content": "        let original = \"line1\\nline2\\nline3\\nline4\\nline5\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 780,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(original));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 781,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 782,
          "content": "        // First AI edit: adds line6, line7",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 783,
          "content": "        let after1 = \"line1\\nline2\\nline3\\nline4\\nline5\\nline6\\nline7\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 784,
          "content": "        history.add_edit(AIEdit::new(\"prompt1\", 0, \"Edit\", original, after1));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 785,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 786,
          "content": "        // Second AI edit: adds line8 and modifies line3",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 787,
          "content": "        let after2 = \"line1\\nline2\\nLINE3_MODIFIED\\nline4\\nline5\\nline6\\nline7\\nline8\\n\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 788,
          "content": "        history.add_edit(AIEdit::new(\"prompt2\", 1, \"Edit\", after1, after2));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 789,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 790,
          "content": "        // Final content matches AI edit exactly",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 791,
          "content": "        let result = ThreeWayAnalyzer::analyze_with_diff(&history, after2);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 792,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 793,
          "content": "        println!(\"\\nAttribution results:\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 794,
          "content": "        println!(\"  AI lines: {}\", result.summary.ai_lines);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 795,
          "content": "        println!(\"  AI modified lines: {}\", result.summary.ai_modified_lines);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 796,
          "content": "        println!(\"  Original lines: {}\", result.summary.original_lines);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 797,
          "content": "        println!(\"  Human lines: {}\", result.summary.human_lines);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 798,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 799,
          "content": "        for line in &result.lines {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 800,
          "content": "            println!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 801,
          "content": "                \"  Line {}: {:?} - '{}'\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 802,
          "content": "                line.line_number, line.source, line.content",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 803,
          "content": "            );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 804,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 805,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 806,
          "content": "        // line1, line2, line4, line5: Original (unchanged from original)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 807,
          "content": "        // LINE3_MODIFIED: AI (this line was changed by AI)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 808,
          "content": "        // line6, line7, line8: AI (new lines added by AI)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 809,
          "content": "        assert_eq!(result.summary.ai_lines, 4, \"4 lines actually changed by AI\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 810,
          "content": "        assert_eq!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 811,
          "content": "            result.summary.original_lines, 4,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 812,
          "content": "            \"4 lines unchanged from original\"",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 813,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 814,
          "content": "        assert_eq!(result.summary.human_lines, 0, \"No human lines expected\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 815,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 816,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 817,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 818,
          "content": "    fn test_duplicate_lines_in_ai_output() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 819,
          "content": "        // Test that duplicate lines (like closing braces) are properly attributed",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 820,
          "content": "        // This tests the real-world scenario where the same line content appears multiple times",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 821,
          "content": "        let original = r#\"fn foo() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 822,
          "content": "    code();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 823,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 824,
          "content": "\"#;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 825,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(original));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 826,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 827,
          "content": "        // AI adds a new function with similar structure (duplicate \"}\" and empty lines)",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 828,
          "content": "        let after1 = r#\"fn foo() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 829,
          "content": "    code();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 830,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 831,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 832,
          "content": "fn bar() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 833,
          "content": "    more_code();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 834,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 835,
          "content": "\"#;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 836,
          "content": "        history.add_edit(AIEdit::new(\"Add bar function\", 0, \"Edit\", original, after1));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 837,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 838,
          "content": "        let result = ThreeWayAnalyzer::analyze_with_diff(&history, after1);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 839,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 840,
          "content": "        println!(\"\\nDuplicate lines test:\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 841,
          "content": "        for line in &result.lines {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 842,
          "content": "            let source_str = match &line.source {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 843,
          "content": "                LineSource::AI { .. } => \"AI\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 844,
          "content": "                LineSource::Original => \"Orig\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 845,
          "content": "                LineSource::Human => \"Human\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 846,
          "content": "                _ => \"Other\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 847,
          "content": "            };",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 848,
          "content": "            println!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 849,
          "content": "                \"  Line {}: {} - '{}'\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 850,
          "content": "                line.line_number, source_str, line.content",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 851,
          "content": "            );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 852,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 853,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 854,
          "content": "        // Lines 1-3 (fn foo, code(), }) exist in BOTH original and AI  Original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 855,
          "content": "        // Lines 4-7 (empty, fn bar, more_code(), }) are only in AI  AI",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 856,
          "content": "        assert_eq!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 857,
          "content": "            result.summary.human_lines, 0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 858,
          "content": "            \"No human lines - all are either original or AI\"",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 859,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 860,
          "content": "        assert_eq!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 861,
          "content": "            result.summary.original_lines, 3,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 862,
          "content": "            \"3 lines unchanged from original (fn foo, code, first closing brace)\"",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 863,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 864,
          "content": "        assert_eq!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 865,
          "content": "            result.summary.ai_lines, 4,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 866,
          "content": "            \"4 lines added by AI (empty, fn bar, more_code, second closing brace)\"",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 867,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 868,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 869,
          "content": "        // The closing brace \"}\" appears twice:",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 870,
          "content": "        // - Line 3: from original (exists in both)  Original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 871,
          "content": "        // - Line 7: added by AI (only in AI output)  AI",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 872,
          "content": "        let closing_braces: Vec<_> = result.lines.iter().filter(|l| l.content == \"}\").collect();",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 873,
          "content": "        assert_eq!(closing_braces.len(), 2, \"Should have 2 closing braces\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 874,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 875,
          "content": "        // First closing brace (line 3) should be Original",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 876,
          "content": "        assert!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 877,
          "content": "            matches!(closing_braces[0].source, LineSource::Original),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 878,
          "content": "            \"First closing brace (line {}) should be Original, got {:?}\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 879,
          "content": "            closing_braces[0].line_number,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 880,
          "content": "            closing_braces[0].source",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 881,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 882,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 883,
          "content": "        // Second closing brace (line 7) should be AI",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 884,
          "content": "        assert!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 885,
          "content": "            matches!(closing_braces[1].source, LineSource::AI { .. }),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 886,
          "content": "            \"Second closing brace (line {}) should be AI, got {:?}\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 887,
          "content": "            closing_braces[1].line_number,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 888,
          "content": "            closing_braces[1].source",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 889,
          "content": "        );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 890,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 891,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 892,
          "content": "    #[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 893,
          "content": "    fn test_common_patterns_attributed_to_ai() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 894,
          "content": "        // Test that common patterns like empty lines, closing braces, and doc comments",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 895,
          "content": "        // are properly attributed to AI when they appear in AI output",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 896,
          "content": "        let original = \"\";",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 897,
          "content": "        let mut history = FileEditHistory::new(\"test.rs\", Some(original));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 898,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 899,
          "content": "        // AI generates code with common patterns",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 900,
          "content": "        let ai_output = r#\"/// A test function",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 901,
          "content": "#[test]",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 902,
          "content": "fn test() {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 903,
          "content": "    assert!(true);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 904,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 905,
          "content": "\"#;",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 906,
          "content": "        history.add_edit(AIEdit::new(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 907,
          "content": "            \"Generate test\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 908,
          "content": "            0,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 909,
          "content": "            \"Write\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 910,
          "content": "            original,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 911,
          "content": "            ai_output,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 912,
          "content": "        ));",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 913,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 914,
          "content": "        let result = ThreeWayAnalyzer::analyze_with_diff(&history, ai_output);",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 915,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 916,
          "content": "        // All lines should be AI",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 917,
          "content": "        assert_eq!(result.summary.ai_lines, 5, \"All 5 lines should be AI\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 918,
          "content": "        assert_eq!(result.summary.human_lines, 0, \"No human lines\");",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 919,
          "content": "",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 920,
          "content": "        // Check each line individually",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 921,
          "content": "        for line in &result.lines {",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 922,
          "content": "            assert!(",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 923,
          "content": "                matches!(line.source, LineSource::AI { .. }),",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 924,
          "content": "                \"Line '{}' should be AI, got {:?}\",",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 925,
          "content": "                line.content,",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 926,
          "content": "                line.source",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 927,
          "content": "            );",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 928,
          "content": "        }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 929,
          "content": "    }",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        },
        {
          "line_number": 930,
          "content": "}",
          "source": {
            "type": "AI",
            "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343"
          },
          "edit_id": "af4b5c5b-cf43-4631-94e2-a6d6feb4b343",
          "prompt_index": 15,
          "confidence": 1.0
        }
      ],
      "summary": {
        "total_lines": 930,
        "ai_lines": 930,
        "ai_modified_lines": 0,
        "human_lines": 0,
        "original_lines": 0,
        "unknown_lines": 0
      }
    }
  ]
}